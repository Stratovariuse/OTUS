# Настройка PSQL

## Ссылки

* [Как использовать pspg (видео)](https://pgconf.ru/2021/288291)
* [Текстовый вариант](https://ptolmachev.ru/pspg-chast-1.html)

## Файл ~/.psqlrc

Пользовательский файл должен располагаться в домашнем каталоге
По умолчанию файл отсутствует

### Настройка приглашения

Для добавления информации о роли нужно в начало переменных PROMPT1 и PROMPT2 добавить %n@

```s
student$ echo "\set PROMPT1 '%n@%/%R%x%# '" >> ~/.psqlrc
student$ echo "\set PROMPT2 '%n@%/%R%x%# '" >> ~/.psqlrc
```

Переменная PROMPT1 определяет приглашение для первой строки вводимого пользователем запроса. Если запрос занимает более одной строки, начиная со второй за приглашение отвечает переменная PROMPT2. Обе переменные имеют одинаковое значение по умолчанию, но можно установить разные приглашения для первой и последующих строк запроса. Переменная PROMPT3 используется только для команды COPY

### Вывод длительности выполнения команд SQL

```s
student$ echo "\timing on" >> ~/.psqlrc
```

В итоге содержимое файла .psqlrc станет таким:

```n
student$ cat ~/.psqlrc

\setenv PSQL_PAGER 'less -XS'
\set PROMPT1 '%n@%/%R%x%# '
\set PROMPT2 '%n@%/%R%x%# '
\timing on
```

Чтобы изменения вступили в силу, нужно выйти и заново войти в psql.
=> \q

## Настройка Pspg

```s
sudo apt install pspg
export PAGER='pspg'
\setenv PAGER 'pspg -s 7'
\pset border 2
```

Перезапускаем подключение к терминалу и запускаем psq, выполняем команду:

\l
SELECT * from pg_tables;

